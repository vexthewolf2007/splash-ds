(this["webpackJsonpsplash-ds"]=this["webpackJsonpsplash-ds"]||[]).push([[0],{39:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(5),o=n.n(i),c=n(31),r=n.n(c),s=(n(39),n(34)),l=n(13),d=n(9),u=n(32),h=n.n(u),b=n(8),j=function(e){var t=e.image,n=e.keepRatio,c=e.showTransformer,r=Object(i.useRef)(),s=Object(i.useRef)();o.a.useEffect((function(){var e,t;null===s||void 0===s||null===(e=s.current)||void 0===e||e.nodes([r.current]),null===s||void 0===s||null===(t=s.current)||void 0===t||t.getLayer().batchDraw()}));var l=n?["top-left","top-right","bottom-left","bottom-right"]:["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{image:t,ref:r,draggable:!0}),c&&Object(a.jsx)(b.f,{enabledAnchors:l,keepRatio:n,ref:s})]})},g=n.p+"static/media/splash-ds-logo.3acf7fdb.png",p=n.p+"static/media/new-3ds.c72562d7.png";n(86);window.Konva.pixelRatio=1;var f={top:{x:140,y:96,width:400,height:240},bottom:{x:180,y:415,width:320,height:240}},m=function(e){return new Promise((function(t,n){var a=new window.Image;a.onload=function(){t(a)},a.src=e}))},v=function(){var e=Object(i.useState)(void 0),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(i.useState)(""),r=Object(d.a)(c,2),u=r[0],v=r[1],O=Object(i.useState)(""),x=Object(d.a)(O,2),w=x[0],y=x[1],C=Object(i.useState)(void 0),k=Object(d.a)(C,2),S=k[0],D=k[1],E=Object(i.useState)(""),R=Object(d.a)(E,2),I=R[0],F=R[1],N=Object(i.useState)(0),T=Object(d.a)(N,2),L=T[0],B=T[1],A=Object(i.useState)(!0),P=Object(d.a)(A,2),z=P[0],U=P[1],M=Object(i.useState)("#228ae2"),J=Object(d.a)(M,2),K=J[0],q=J[1],H=Object(i.useState)(!1),W=Object(d.a)(H,2),G=W[0],Q=W[1],V=function(e){e.stopPropagation(),e.preventDefault()},X=function(e,t){var n,a=document.getElementsByClassName("konvajs-content")[0].querySelector("canvas"),i=Object(l.a)({},f[e]),o=null===a||void 0===a||null===(n=a.getContext("2d"))||void 0===n?void 0:n.getImageData.apply(n,Object(s.a)(Object.values(i))),c=document.createElement("canvas"),r=c.getContext("2d");c.width=i.width,c.height=i.height,o&&(null===r||void 0===r||r.putImageData(o,0,0));var d=c.toDataURL("image/png"),u=document.createElement("img"),h="top"===e?{x:0,y:0}:{x:40,y:240};u.onload=function(){var e,n=document.getElementById("preview-canvas");null===n||void 0===n||null===(e=n.getContext("2d"))||void 0===e||e.drawImage(u,h.x,h.y);var a=function(e){if(e){var t,n=null===e||void 0===e||null===(t=e.getContext("2d"))||void 0===t?void 0:t.getImageData(0,0,e.width,e.height).data,a="";if(n)for(var i=0;i<n.length;i+=4)a+=String.fromCharCode(n[i+2],n[i+1],n[i]);return a}}(function(e){var t=document.createElement("canvas");t.width=e.height,t.height=e.width;var n=t.getContext("2d");return n&&(n.save(),n.translate(t.width/2,t.height/2),n.rotate(90*Math.PI/180),n.drawImage(e,-e.width/2,-e.height/2),n.restore()),t}(u));a&&t(a)},u.src=d};return Object(i.useEffect)((function(){m(p).then((function(e){D(e)}))}),[]),Object(i.useEffect)((function(){G&&(X("top",v),X("bottom",y))}),[G]),Object(i.useEffect)((function(){if(u&&w){var e,t=document.createElement("img"),n=null===(e=document)||void 0===e?void 0:e.getElementById("preview-canvas"),a=null===n||void 0===n?void 0:n.toDataURL("image/png");F(a),t.src=a}}),[u,w]),Object(i.useEffect)((function(){I&&(!function(){var e=new h.a;e.file("splash.bin",u,{binary:!0}),e.file("splashbottom.bin",w,{binary:!0}),e.file("preview.png",I.slice(22),{base64:!0}),e.generateAsync({type:"blob"}).then((function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;e&&function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(e,"splash.zip")}}))}(),Q(!1),v(""),y(""),F(""))}),[I,w,u]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("img",{id:"logo",alt:"logo",src:g}),Object(a.jsx)("h3",{children:"boot splash creator for Nintendo 3DS systems"}),Object(a.jsxs)("div",{onDragOver:V,onDrop:function(e){if(V(e),e.dataTransfer.files.length>=1){var t=e.dataTransfer.files[0];if(t.type in{"image/jpeg":!0,"image/gif":!0,"image/png":!0}){var n=new window.FileReader;n.onload=function(e){var t=e.target.result;m(t).then((function(e){o(e)}))},n.readAsDataURL(t)}}},children:[Object(a.jsxs)("div",{id:"options",children:[Object(a.jsxs)("div",{className:"option",children:[Object(a.jsx)("span",{className:"input-spacer",children:Object(a.jsx)("input",{id:"dsTransparency",type:"range",min:0,max:1,step:.1,onChange:function(e){return B(+e.target.value)},value:L})}),Object(a.jsx)("label",{htmlFor:"dsTransparency",children:"3DS transparency (helps when resizing and rotating)"})]}),Object(a.jsxs)("div",{className:"option",children:[Object(a.jsx)("span",{className:"input-spacer",children:Object(a.jsx)("input",{type:"checkbox",id:"keepRatio",checked:z,onChange:function(e){return U(e.target.checked)}})}),Object(a.jsx)("label",{htmlFor:"keepRatio",children:"Keep splash image ratio when resizing"})]}),Object(a.jsxs)("div",{className:"option",children:[Object(a.jsx)("span",{className:"input-spacer",children:Object(a.jsx)("input",{type:"color",id:"bgColor",onChange:function(e){return q(e.target.value)},value:K})}),Object(a.jsx)("label",{htmlFor:"keepRatio",children:"Screen background color"})]})]}),Object(a.jsx)(b.d,{width:680,height:743,children:Object(a.jsxs)(b.b,{children:[Object(a.jsx)(b.c,Object(l.a)(Object(l.a)({},f.top),{},{fill:K})),Object(a.jsx)(b.c,Object(l.a)(Object(l.a)({},f.bottom),{},{fill:K})),n?Object(a.jsx)(j,{image:n,keepRatio:z,showTransformer:!G}):Object(a.jsx)(b.e,{text:"Drop an image here",fontSize:32,fontStyle:"bold",x:190,y:196,fill:"#005aa8",stroke:"white",strokeWidth:1}),S&&Object(a.jsx)(b.a,{image:S,listening:!1,opacity:1-L})]})}),Object(a.jsx)("button",{onClick:function(){Q(!0)},disabled:!n,children:"download splash screen"}),Object(a.jsx)("button",{onClick:function(){o(void 0),v(""),y(""),document.getElementById("preview").innerHTML="",F(""),Q(!1)},children:"reset"})]}),Object(a.jsx)("div",{id:"preview",children:Object(a.jsx)("canvas",{id:"preview-canvas",width:f.top.width,height:f.top.height+f.bottom.height,style:{display:"none"}})})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))};r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),O()}},[[87,1,2]]]);
//# sourceMappingURL=main.e955dfd9.chunk.js.map